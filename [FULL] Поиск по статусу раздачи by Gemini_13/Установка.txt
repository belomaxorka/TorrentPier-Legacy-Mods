------------ Поиск по статусу раздачи ------------
Автор: Gemini_13
Версия: v2.0.0
Описание: Добавляет поиск раздачи по ее статусу проверки модератором.
--------------------------------------------------

============= [Открыть library/config.php и вставить в конце] =============
// Поиск по статусу раздачи
$bb_cfg['search_by_tor_status'] = true;
===========================================================================

============= [Открыть tracker.php и найти] =============
$session_id  = $userdata['session_id'];
=========================================================

============= [Ниже вставить] =============
// Поиск по статусу раздачи
$status      = (isset($_REQUEST['status'])) ? $_REQUEST['status'] : false;
===========================================

============= [Далее найти] =============
	$SQL['WHERE'][] = "tor.tor_type IN(1,2)";
}
=========================================

============= [Ниже вставить] =============
// Поиск по статусу раздачи
if (is_array($status) && count($status) > 0)
{
	$SQL['WHERE'][] = "tor.tor_status IN(" . implode(', ', $status) . ")";
}
===========================================

============= [Далее найти] =============
// Sort dir
$template->assign_vars(array(
=========================================

============= [Выше вставить] =============
// Поиск по статусу раздачи
$statuses = '';
if ($bb_cfg['search_by_tor_status'])
{
	$statuses = '<table border="0" cellpadding="0" cellspacing="0">';
	foreach (array_chunk($bb_cfg['tor_icons'], 2, true) as $statuses_part)
	{
		$statuses .= '<tr>';
		foreach ($statuses_part as $status_id => $status_styles)
		{
			$checked_status = ((is_array($status) && count($status) > 0) && in_array($status_id, $status)) ? 'checked' : '';
			$statuses .= '<td><p class="chbox"><input type="checkbox" name="status[]" value="' . $status_id . '"' . $checked_status . '>' . $status_styles . '&nbsp;' . $lang['TOR_STATUS_NAME'][$status_id] . '</p></td>';
		}
		$statuses .= '</tr>';
	}
	$statuses .= '</table>';
}
===========================================

============= [Далее найти] =============
'TOR_COLSPAN'       => $tor_colspan,
=========================================

============= [Ниже вставить] =============
// Поиск по статусу раздачи
'TOR_STATUS'        => $statuses,
===========================================

============= [Открыть library/language/en/main.php и вставить в конце] =============
// Поиск по статусу раздачи
$lang['TORRENT_STATUS'] = 'Search by status of release';
=====================================================================================

============= [Открыть library/language/ru/main.php и вставить в конце] =============
// Поиск по статусу раздачи
$lang['TORRENT_STATUS'] = 'Поиск по статусу релиза';
=====================================================================================

============= [Открыть library/language/uk/main.php и вставить в конце] =============
// Поиск по статусу раздачи
$lang['TORRENT_STATUS'] = 'Пошук за статусом роздачі';
=====================================================================================

============= [Открыть tracker.tpl и найти] =============
<td colspan="2" width="50%">
=========================================================

============= [Ниже вставить] =============
<!-- IF TOR_STATUS -->
<fieldset style="margin-top: 0;">
<legend>{L_TORRENT_STATUS}</legend>
<div>{TOR_STATUS}</div>
</fieldset>
<!-- ENDIF -->
===========================================
